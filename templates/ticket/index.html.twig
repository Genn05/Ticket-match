{% extends 'base.html.twig' %}

{% block title %}Tickets{% endblock %}

{% block body %}
{% include 'partials/nav.html.twig' %}
<div class="container py-5">
    <h1 class="mb-4">Liste des Tickets</h1>

    <div class="row">
        {% for ticket in tickets %}
            <div class="col-md-4 mb-4">
                <div class="card ticket-card">
                    <div class="card-header ticket-header">
                        <h5 class="mb-0">{{ ticket.type|capitalize }}</h5>
                    </div>
                    <div class="card-body ticket-body custom-card-body">
                        <div class="match-info"> 
                            <div class="match-date mb-2">
                                <i class="far fa-calendar-alt me-1"></i> 
                                {{ ticket.mattch.dateMatch|date('d/m/Y H:i') }}
                            </div>

                            <div class="match-teams d-flex justify-content-between align-items-center mb-2">
                                <div class="text-center">
                                    <img src="{{ ticket.mattch.imageEquipeDomicile }}" alt="{{ ticket.mattch.equipeA }}" class="img-thumbnail" style="height: 80px;">
                                    <div>{{ ticket.mattch.equipeA }}</div>
                                </div>
                                <div class="fw-bold">VS</div>
                                <div class="text-center">
                                    <img src="{{ ticket.mattch.imageEquipeExterieur }}" alt="{{ ticket.mattch.equipeB }}" class="img-thumbnail" style="height: 80px;">
                                    <div>{{ ticket.mattch.equipeB }}</div>
                                </div>
                            </div>
                        </div>

                        <div class="ticket-info d-flex justify-content-between align-items-center mt-3">
                            <div>
                                <div class="text-muted mb-1">Quantité</div>
                                <div class="fw-bold">{{ ticket.quantite }}</div>
                            </div>
                            <div>
                                <div class="text-muted mb-1">Prix</div>
                                <div class="ticket-price">{{ ticket.prix }} €</div>
                            </div>
                        </div>

                        <div class="mt-3 d-flex justify-content-between">
                            <a href="{{ path('app_ticket_show', {'id': ticket.id}) }}" class="btn btn-outline-primary btn-sm">Voir</a>
                            {% if is_granted('ROLE_ADMIN') %}
                                <a href="{{ path('app_ticket_edit', {'id': ticket.id}) }}" class="btn btn-warning btn-sm">Modifier</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="col-12">
                <div class="alert alert-info text-center">
                    Aucun ticket trouvé.
                </div>
            </div>
        {% endfor %}
    </div>

    {% if is_granted('ROLE_ADMIN') %}
        <div class="mt-4">
            <a href="{{ path('app_ticket_new') }}" class="btn btn-success">Créer un nouveau ticket</a>
        </div>
    {% endif %}
</div>

{% include 'partials/footer.html.twig' %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .custom-card-body {
            height: 100%;
            overflow-y: auto;
        }
    </style>
{% endblock %}
